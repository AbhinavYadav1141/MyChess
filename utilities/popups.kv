#: import Window kivy.core.window.Window


<PieceButton@Button>:
    path: ""
    height: self.width
    canvas:
        Rectangle:
            source: "" if self.parent == None else self.path
            size: self.size
            pos: self.pos


<PromotionPopup>:
    size_hint: (None, None)
    width: Window.width * .9
    height: self.width/2 if Window.height>Window.width else self.width/3
    title: "Promote !"
    BoxLayout:
        PieceButton:
            id: qweenw
            path: root.piece.path[root.piece.variety][root.piece.color]['queen']
            on_press:
                root.piece.promote("queen", root.move)
                root.dismiss()
        PieceButton:
            id: rookw
            path: root.piece.path[root.piece.variety][root.piece.color]['rook']
            on_press:
                root.piece.promote("rook", root.move)
                root.dismiss()
        PieceButton:
            id: knightw
            path: root.piece.path[root.piece.variety][root.piece.color]['knight']
            on_press:
                root.piece.promote("knight", root.move)
                root.dismiss()
        PieceButton:
            id: bishopw
            path: root.piece.path[root.piece.variety][root.piece.color]['bishop']
            on_press:
                root.piece.promote("bishop", root.move)
                root.dismiss()


<ResultPopup>:
    title: "Result"
    size_hint: (None, None)
    height: min(Window.height, Window.width)*.8
    width: self.height
    BoxLayout:
        orientation: "vertical"

        Label:
            text: "Game Over !!"
        Label:
            text: root.result
        Label:
            text: root.reason
        Button:
            text: "Restart"
            on_release:
                root.restart(self)
                root.dismiss()
        